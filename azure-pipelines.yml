trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

stages:
  - stage: Build
    jobs:
      - job: Build
        steps:
          - task: NodeTool@0
            inputs:
              versionSpec: '12.x'
            displayName: 'Install Node.js'
          
          - script: |
              npm install
              npm run build
            displayName: 'npm install and build'
          
          - task: PublishBuildArtifacts@1
            inputs:
              PathtoPublish: '$(Build.ArtifactStagingDirectory)'
              ArtifactName: 'drop'
              publishLocation: 'Container'
            displayName: 'Publish Build Artifacts'
          - task: AzureWebApp@1
            inputs:
              azureSubscription: 'Azure subscription_Accumenta (c85ec78d-8a5c-478e-abc8-8c32d9ae4e05)'
              appType: 'webApp'
              appName: 'pr-pelisambandalu-react-Development'
              deployToSlotOrASE: true
              resourceGroupName: 'Pr_pellisambandalu'
              slotName: 'production'
              package: '$(System.DefaultWorkingDirectory)/**/*.zip'
              deploymentMethod: 'auto'
  

